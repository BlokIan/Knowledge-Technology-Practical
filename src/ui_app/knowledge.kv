#:kivy 2.3.0

###############
# MAIN LAYOUT
###############
<MainLayout@RelativeLayout>:
    # Button for next page
    Button:
        text: app.next_button
        size_hint: 0.2, 0.15
        pos_hint: {'center_x': 0.5, 'y': 0}
        on_release: app.switch_to_next_page()

    # Question text
    Label:
        text: app.title
        color: 0,0,0,1
        pos_hint: {'center_x': 0.5, 'center_y': 0.75}
        font_size: 25


###############
# SCREEN MANAGER
###############
<Manager>:
    canvas.before:
        Color:
            rgba: 255,255,255,0.8
        Rectangle:
            pos: self.pos
            size: self.size

    ScreenManager:
        id: screen_manager
        StartingPage:
            id: starting_page
            name: 'starting_page'
        RadioButtons1:
            id: radio_buttons_1
            name: 'radio_buttons_1'
        RadioButtons2:
            id: radio_buttons_2
            name: 'radio_buttons_2'
        Text1:
            id: text_1
            name: 'text_1'
        Text2:
            id: text_2
            name: 'text_2'
        YesNo1:
            id: yesno_1
            name: 'yesno_1'
        YesNo2:
            id: yesno_2
            name: 'yesno_2'
        AdvicePage:
            id: advice_page
            name: 'advice_page'


###############
# STARTING PAGE
###############
<StartingPage>:
    GridLayout:
        cols: 1
        Button:
            text: 'start'
            size_hint: 0.5, 0.5
            on_release: app.switch_to_next_page()



###############
# RADIO BUTTONS 1
###############
<RadioButtons1>:
    id: radio_buttons_2

    MainLayout:
        # Radio buttons with scrolling support
        ScrollView:
            size_hint: 0.4, 0.4
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            do_scroll_x: False  # Disable horizontal scrolling
            do_scroll_y: True   # Enable vertical scrolling

            GridLayout:
                id: radio_group
                canvas:
                    Color:
                        rgba: 1, 1, 1, 1  # Background color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos

                cols: 1  # Keep one column for label + checkbox pairs
                size_hint_y: None  # Necessary for dynamic height
                height: self.minimum_height  # Automatically adjust to content height
                row_default_height: 50  # Set default height for rows
                row_force_default: True


###############
# RADIO BUTTONS 2
###############
<RadioButtons2>:
    id: radio_buttons_2

    MainLayout:
        # Radio buttons with scrolling support
        ScrollView:
            size_hint: 0.4, 0.4
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            do_scroll_x: False  # Disable horizontal scrolling
            do_scroll_y: True   # Enable vertical scrolling

            GridLayout:
                id: radio_group
                canvas:
                    Color:
                        rgba: 1, 1, 1, 1  # Background color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos

                cols: 1  # Keep one column for label + checkbox pairs
                size_hint_y: None  # Necessary for dynamic height
                height: self.minimum_height  # Automatically adjust to content height
                row_default_height: 50  # Set default height for rows
                row_force_default: True


###############
# TEXT 1
###############
<Text1>:
    id: text_1
    # I don't really understand why you need cols and rows here rn
    cols: 2
    rows: 4

    MainLayout:
        GridLayout:
            cols: 1
            rows: 2
            size_hint: 0.6, 0.4
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}

            # Error text above text input
            Label:
                text: root.error_text
                color: 1,0,0,1
                font_size: 13
                halign: 'left'
                valign: 'bottom'
                text_size: self.size


            GridLayout:
                id: text_group
                canvas:
                    Color:
                        rgba: 1, 1, 1, 1  # Set the background color (R, G, B, Alpha)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos

                cols: 1
                rows: 1
                RelativeLayout:
                    cols: 1
                    rows: 1
                    size_hint: 0.5, 0.5
                    TextInput:
                        id: text_input
                        active: True
                        hint_text: 'Enter text'
                        multiline: False


###############
# TEXT 2
###############
<Text2>:
    id: text_2
    # I don't really understand why you need cols and rows here rn
    cols: 2
    rows: 4

    MainLayout:
        GridLayout:
            cols: 1
            rows: 2
            size_hint: 0.6, 0.4
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}

            # Error text above text input
            Label:
                text: root.error_text
                color: 1,0,0,1
                font_size: 13
                halign: 'left'
                valign: 'bottom'
                text_size: self.size


            GridLayout:
                id: text_group
                canvas:
                    Color:
                        rgba: 1, 1, 1, 1  # Set the background color (R, G, B, Alpha)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos

                cols: 1
                rows: 1
                RelativeLayout:
                    cols: 1
                    rows: 1
                    size_hint: 0.5, 0.5
                    TextInput:
                        id: text_input
                        active: True
                        hint_text: 'Enter text'
                        multiline: False


###############
# YES NO 1
###############
<YesNo1>:
    id: yesno_1
    # I don't really understand why you need cols and rows here rn
    cols: 2
    rows: 4

    MainLayout:
        GridLayout:
            cols: 1
            rows: 2
            size_hint: 0.6, 0.4
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}

            # Error text above text input
            Label:
                text: root.error_text
                color: 1,0,0,1
                font_size: 13
                halign: 'center'
                valign: 'bottom'
                text_size: self.size

            GridLayout:
                id: radio_group
                canvas:
                    Color:
                        rgba: 1, 1, 1, 1  # Set the background color (R, G, B, Alpha)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos

                cols: 2
                rows: 2
                size_hint: 0.4, 0.6
                pos_hint: {'center_x': 0.5, 'center_y': 0.3}

                Button:
                    text: 'Yes'
                    on_release: root.pressed_yes()
                
                Button:
                    text: 'No'
                    on_release: root.pressed_no()


###############
# YES NO 2
###############
<YesNo2>:
    id: yesno_2
    # I don't really understand why you need cols and rows here rn
    cols: 2
    rows: 4

    MainLayout:
        GridLayout:
            cols: 1
            rows: 2
            size_hint: 0.6, 0.4
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}

            # Error text above text input
            Label:
                text: root.error_text
                color: 1,0,0,1
                font_size: 13
                halign: 'center'
                valign: 'bottom'
                text_size: self.size

            GridLayout:
                id: radio_group
                canvas:
                    Color:
                        rgba: 1, 1, 1, 1  # Set the background color (R, G, B, Alpha)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos

                cols: 2
                rows: 2
                size_hint: 0.4, 0.6
                pos_hint: {'center_x': 0.5, 'center_y': 0.3}

                Button:
                    text: 'Yes'
                    on_release: root.pressed_yes()
                
                Button:
                    text: 'No'
                    on_release: root.pressed_no()


###############
# ADVICE PAGE
###############
<AdvicePage>:
    id: advice_page
    MainLayout:
        ScrollView:
            size_hint: 0.4, 0.4
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            do_scroll_x: False  # Disable horizontal scrolling
            do_scroll_y: True   # Enable vertical scrolling

            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Set the background color (R, G, B, Alpha)
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            # Container for the text (important for ScrollView functionality)
            GridLayout:
                cols: 1
                size_hint_y: None  # Allow dynamic height
                height: self.minimum_height  # Adjust to fit content

                Label:
                    text: app.advice
                    text_size: self.width - 20, None  # Wrap text within a specific width
                    size_hint_y: None  # Enable dynamic height
                    height: self.texture_size[1] + 20  # Match height to text
                    color: 0, 0, 0, 1
                    font_size: '18sp'

            

            



            
            